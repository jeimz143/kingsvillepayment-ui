(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["0c89dda6"],{"19de":function(t,e){t.exports=function(t,e,a,o){var s="undefined"!==typeof o?[o,t]:[t],n=new Blob(s,{type:a||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,e);else{var l=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(n):window.webkitURL.createObjectURL(n),i=document.createElement("a");i.style.display="none",i.href=l,i.setAttribute("download",e),"undefined"===typeof i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(l)},200)}}},cb2d:function(t,e,a){"use strict";var o=a("fd04"),s=a.n(o);s.a},ec95:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"page-showcase q-pa-md"},[a("div",{staticClass:"row gutter-sm"},[a("div",{staticClass:"col-xs-12"},[a("h5",{staticClass:"q-pa-none q-ma-none"},[t._v("Dashboard")])]),a("div",{staticClass:"col-xs-12 col-md-12"},[a("q-tabs",{staticClass:"shadow-2"},[a("q-tab",{attrs:{slot:"title",default:"",name:"daily",label:"Daily"},slot:"title"}),a("q-tab",{attrs:{slot:"title",name:"monthly",label:"Monthly"},slot:"title"}),a("q-tab-pane",{attrs:{name:"daily"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12 col-md-4"},[a("q-field",{staticClass:"q-pl-md",attrs:{label:"Select Date:","label-width":"3"}},[a("q-datetime",{attrs:{type:"date"},on:{input:function(e){t.loadDailyPayments()}},model:{value:t.dailyDate,callback:function(e){t.dailyDate=e},expression:"dailyDate"}})],1)],1),a("div",{staticClass:"col-xs-12 col-md-8"},[a("q-btn",{staticClass:"float-right",attrs:{label:"Download Daily Report",color:"positive",icon:"file_download"},on:{click:t.downloadDailyReport}})],1),a("div",{staticClass:"col-xs-12 q-pa-md"},[a("div",{staticClass:"row gutter-sm"},[a("div",{staticClass:"col-xs-12 col-md-6"},[a("div",{staticStyle:{"text-align":"center"}},[a("h6",{staticClass:"q-mt-md text-primary"},[t._v("Income Today:")]),a("h3",{staticClass:"q-mt-sm"},[t._v("₱ "+t._s(t.dailyOverAllTotal))])])]),a("div",{staticClass:"col-xs-12 col-md-6"},[a("div",{staticClass:"daily-payments-summary"},[a("div",{attrs:{id:"chart"}},[t.dailyLoaded?a("VueApexCharts",{attrs:{type:"pie",width:480,options:t.dailyChartOptions.chartOptions,series:t.dailyChartOptions.series}}):t._e()],1)])])])])])]),a("q-tab-pane",{attrs:{name:"weekly"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12 col-md-6"},[a("q-field",{staticClass:"q-pl-md",attrs:{label:"Select Date:","label-width":"3"}})],1),a("div",{staticClass:"col-xs-12"})])]),a("q-tab-pane",{attrs:{name:"monthly"}},[a("div",{staticClass:"row gutter-sm"},[a("div",{staticClass:"col-xs-12 col-md-4"},[a("q-field",{attrs:{label:"Select School Year:",orientation:"vertical","label-width":"3"}},[a("q-select",{attrs:{options:t.schoolYearOptions},on:{input:t.syOnInput},model:{value:t.selectedSchoolYear,callback:function(e){t.selectedSchoolYear=e},expression:"selectedSchoolYear"}})],1)],1),a("div",{staticClass:"col-xs-12 col-md-4"},[a("q-field",{attrs:{label:"Select Month:",orientation:"vertical","label-width":"3"}},[a("q-select",{attrs:{options:t.parseMonth},model:{value:t.selectedMonthly,callback:function(e){t.selectedMonthly=e},expression:"selectedMonthly"}})],1)],1),a("div",{staticClass:"col-xs-12 col-md-4"},[a("q-btn",{staticClass:"float-right",attrs:{label:"Download Monthly Report",color:"positive",icon:"file_download"},on:{click:t.downloadMonthlyReport}})],1)]),t.monthlyLoaded?a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12 q-pa-md"},[a("div",{staticClass:"row gutter-sm"},[a("div",{staticClass:"col-xs-12 col-md-6"},[a("div",{staticStyle:{"text-align":"center"}},[a("h6",{staticClass:"q-mt-md text-primary"},[t._v("Monthly Over all total:")]),a("h3",{staticClass:"q-mt-sm"},[t._v("₱ "+t._s(t.monthlyOverAllTotal))])])]),a("div",{staticClass:"col-xs-12 col-md-6"},[a("div",{staticClass:"daily-payments-summary"},[a("div",{attrs:{id:"chart"}},[a("VueApexCharts",{attrs:{type:"pie",width:480,options:t.monthlyChartOptions.chartOptions,series:t.monthlyChartOptions.series}})],1)])])])])]):t._e()]),a("q-tab-pane",{attrs:{name:"annualy"}},[t._v("3")])],1)],1)])])},s=[];o._withStripped=!0;a("7f7f"),a("96cf");var n=a("c973"),l=a.n(n),i=(a("7514"),a("ac6a"),a("2f62")),r=a("2ef0"),c=a.n(r),d=a("c1df"),h=a.n(d),p=a("19de"),u=a.n(p),m=a("3f4a"),f={Daily:function(t){return Object(m["a"])().post("dashboard/daily",t)},DownloadDaily:function(t){return Object(m["a"])({headers:{"Content-Disposition":"attachment;","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"}).post("payments/daily-report",t)},Monthly:function(t){return Object(m["a"])().post("dashboard/monthly",t)},DownloadMonthly:function(t){return Object(m["a"])({headers:{"Content-Disposition":"attachment;","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"}).post("payments/monthly-report",t)}},y=a("659a"),v=a("ed08"),Y={name:"PageDashboard",sockets:{SchoolYearList:function(t){this.$store.dispatch("SchoolYear/listAll",t)},DailyPayments:function(t){var e=this;e.dailyOverAllTotal=t.overAllTotal.toFixed(2),e.dailyChartOptions.series=t.series,e.dailyChartOptions.chartOptions.labels=t.labels,e.dailyLoaded=!0},MonthlyPayments:function(t){var e=this;console.log(t),e.monthlyOverAllTotal=t.overAllTotal.toFixed(2),e.monthlyChartOptions.series=t.series,e.monthlyChartOptions.chartOptions.labels=t.labels,e.monthlyLoaded=!0}},mounted:function(){var t=this;t.dailyDate=new Date,t.loadDailyPayments(),t.getSchoolYear()},beforeMount:function(){this.grid.gridOptions={},this.grid.overlayNoRowsTemplate='<span style="padding: 10px; border: 1px solid #eceff1; background: #fafafad6; width: 50%;">No rows to display <q-icon name=""></span>'},data:function(){return{selectedSchoolYear:"",selectedMonthly:"",schoolYearInfo:{},monthValues:[],grid:{gridColumnApi:null,overlayNoRowsTemplate:null,gridApi:null,gridOptions:{},defaultColDef:{sortable:!0},rowAnimation:!0,rowSelection:"multiple",tableColumns:[{headerName:"Document No.",field:"documentObject.label",sortable:!0,filter:!0,cellStyle:{color:"#027be3","text-decoration":"underline",cursor:"pointer"}},{headerName:"Workflow.",field:"workflow.label",sortable:!0,filter:!0,cellStyle:{color:"#027be3","text-decoration":"underline",cursor:"pointer"}}]},dailyLoaded:!1,dailyOverAllTotal:0,dailyDate:"",dailyChartOptions:{series:[],chartOptions:{labels:[],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}},monthlyLoaded:!1,monthlyOverAllTotal:0,monthlyDate:"",monthlyChartOptions:{series:[],chartOptions:{labels:[],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}}},watch:{selectedMonthly:{handler:function(){var t=this;t.loadMonthlyPayments()}}},computed:c.a.merge(Object(i["b"])({user:"Auth/getUser",schoolYearOptions:"SchoolYear/getListOptions",schoolYearList:"SchoolYear/getAll"}),{parseMonth:function(){var t=this,e=[],a=parseInt(h()().format("YYYY"));return t.monthValues.forEach(function(t){e.push({label:"".concat(v["a"][t]," - ").concat(a),value:h()("".concat(t<10?0:"").concat(t,"/01/").concat(a),"MM/DD/YYYY").format("MM/DD/YYYY")}),12===t&&(a+=1)}),e}}),methods:{syOnInput:function(){var t=this;t.schoolYearInfo=c.a.find(t.schoolYearList,["code",t.selectedSchoolYear]);var e=parseInt(h()().format("YYYY"));t.selectedMonthly=h()("".concat(h()().format("MM"),"/01/").concat(e),"MM/DD/YYYY").format("MM/DD/YYYY"),t.getMonthValues()},getMonthValues:function(){var t=this,e=h()(t.schoolYearInfo.schoolStartDate),a=h()(t.schoolYearInfo.schoolEndDate),o=[];while(e.isBefore(a))o.push(parseInt(e.format("MM"))),e=e.add(1,"month");t.monthValues=o},getSchoolYear:function(t){var e=this;try{y["a"].List().then(function(t){},function(t){e.$q.notify({position:"top",message:t.response.data.error,type:"negative",color:"negative"})})}catch(t){Object(v["b"])(t)}},downloadDailyReport:function(){var t=l()(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,f.DownloadDaily({fromDate:h()(e.dailyDate).format("MM/DD/YYYY"),toDate:h()(e.dailyDate).add(1,"days").format("MM/DD/YYYY")});case 4:a=t.sent,200===a.status&&(a.data.error||u()(a.data,"DailyReport-".concat(h()().format("YYYYMMDD"),".xlsx"))),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(v["b"])(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),loadDailyPayments:function(){var t=l()(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,f.Daily({fromDate:h()(e.dailyDate).format("MM/DD/YYYY"),toDate:h()(e.dailyDate).add(1,"days").format("MM/DD/YYYY")});case 4:a=t.sent,200!==a.status&&e.$q.notify({message:"Whoops! Something Went Wrong.",position:"top"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(v["b"])(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),downloadMonthlyReport:function(){var t=l()(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,f.DownloadMonthly({fromDate:h()(e.selectedMonthly,"MM/DD/YYYY").format("MM/DD/YYYY"),toDate:h()(e.selectedMonthly,"MM/DD/YYYY").endOf("month").format("MM/DD/YYYY")});case 4:a=t.sent,200===a.status&&(a.data.error||u()(a.data,"MonthlyReport-".concat(h()().format("YYYYMMDD"),".xlsx"))),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(v["b"])(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),loadMonthlyPayments:function(){var t=l()(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,f.Monthly({fromDate:h()(e.selectedMonthly,"MM/DD/YYYY").format("MM/DD/YYYY"),toDate:h()(e.selectedMonthly,"MM/DD/YYYY").endOf("month").format("MM/DD/YYYY")});case 4:a=t.sent,200!==a.status&&e.$q.notify({message:"Whoops! Something Went Wrong.",position:"top"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(v["b"])(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),isUserHasAccess:function(t){var e=this,a=c.a.find(e.user.permissions,function(e,a){return e===t.name});return!!a},onGridReady:function(t){t.api.sizeColumnsToFit()},showItem:function(t){var e=this;"documentObject.label"===t.colDef.field?e.$router.push(t.data.documentObject.url):e.$router.push(t.data.workflow.url)}}},b=Y,D=(a("cb2d"),a("2877")),w=Object(D["a"])(b,o,s,!1,null,null,null);w.options.__file="Dashboard.vue";e["default"]=w.exports},fd04:function(t,e,a){}}]);