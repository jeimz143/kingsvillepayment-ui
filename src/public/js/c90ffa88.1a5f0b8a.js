(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["c90ffa88"],{"19de":function(t,e){t.exports=function(t,e,o,n){var a="undefined"!==typeof n?[n,t]:[t],r=new Blob(a,{type:o||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,e);else{var s=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),i=document.createElement("a");i.style.display="none",i.href=s,i.setAttribute("download",e),"undefined"===typeof i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(s)},200)}}},"52c5":function(t,e,o){"use strict";var n=o("3f4a");e["a"]={List:function(t){return Object(n["a"])().get("branches")},Update:function(t){return Object(n["a"])().patch("branches/"+t._id,t)},Store:function(t){return Object(n["a"])().post("branches",t)},Show:function(t){return Object(n["a"])().get("branches/"+t.id)},ShowByCode:function(t){return Object(n["a"])().post("branches/bycode",t)},PickList:function(t){return Object(n["a"])().post("branches/picklist",t)},Delete:function(t){return Object(n["a"])().delete("branches",{data:t})}}},cb2d:function(t,e,o){"use strict";var n=o("fd04"),a=o.n(n);a.a},ec95:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"page-showcase q-pa-md"},[o("div",{staticClass:"row gutter-sm"},[o("div",{staticClass:"col-xs-12"},[o("h5",{staticClass:"q-pa-none q-ma-none"},[t._v("Dashboard")])]),t._e()])])},a=[];n._withStripped=!0;o("7f7f"),o("96cf");var r=o("c973"),s=o.n(r),i=(o("7514"),o("ac6a"),o("2f62")),c=o("2ef0"),l=o.n(c),d=o("c1df"),h=o.n(d),u=o("19de"),p=o.n(u),f=o("3f4a"),m={Daily:function(t){return Object(f["a"])().post("dashboard/daily",t)},DownloadDaily:function(t){return Object(f["a"])({headers:{"Content-Disposition":"attachment;","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"}).post("payments/daily-report",t)},Monthly:function(t){return Object(f["a"])().post("dashboard/monthly",t)},DownloadMonthly:function(t){return Object(f["a"])({headers:{"Content-Disposition":"attachment;","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"}).post("payments/monthly-report",t)}},y=o("659a"),b=o("52c5"),Y=o("ed08"),D={name:"PageDashboard",sockets:{SchoolYearList:function(t){this.$store.dispatch("SchoolYear/listAll",t)},DailyPayments:function(t){var e=this;e.dailyOverAllTotal=t.overAllTotal.toFixed(2),e.dailyChartOptions.series=t.series,e.dailyChartOptions.chartOptions.labels=t.labels,e.dailyLoaded=!0},MonthlyPayments:function(t){var e=this;console.log(t),e.monthlyOverAllTotal=t.overAllTotal.toFixed(2),e.monthlyChartOptions.series=t.series,e.monthlyChartOptions.chartOptions.labels=t.labels,e.monthlyLoaded=!0}},mounted:function(){var t=this;t.dailyDate=new Date,t.loadDailyPayments(),t.getSchoolYear()},beforeMount:function(){this.grid.gridOptions={},this.grid.overlayNoRowsTemplate='<span style="padding: 10px; border: 1px solid #eceff1; background: #fafafad6; width: 50%;">No rows to display <q-icon name=""></span>'},data:function(){return{branch:"",selectedSchoolYear:"",selectedMonthly:"",schoolYearInfo:{},branches:[],monthValues:[],grid:{gridColumnApi:null,overlayNoRowsTemplate:null,gridApi:null,gridOptions:{},defaultColDef:{sortable:!0},rowAnimation:!0,rowSelection:"multiple",tableColumns:[{headerName:"Document No.",field:"documentObject.label",sortable:!0,filter:!0,cellStyle:{color:"#027be3","text-decoration":"underline",cursor:"pointer"}},{headerName:"Workflow.",field:"workflow.label",sortable:!0,filter:!0,cellStyle:{color:"#027be3","text-decoration":"underline",cursor:"pointer"}}]},dailyLoaded:!1,dailyOverAllTotal:0,dailyDate:"",dailyChartOptions:{series:[],chartOptions:{labels:[],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}},monthlyLoaded:!1,monthlyOverAllTotal:0,monthlyDate:"",monthlyChartOptions:{series:[],chartOptions:{labels:[],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}}},watch:{selectedMonthly:{handler:function(){var t=this;t.loadMonthlyPayments()}}},computed:l.a.merge(Object(i["b"])({user:"Auth/getUser",schoolYearOptions:"SchoolYear/getListOptions",schoolYearList:"SchoolYear/getAll"}),{parseMonth:function(){var t=this,e=[],o=parseInt(h()().format("YYYY"));return t.monthValues.forEach(function(t){e.push({label:"".concat(Y["a"][t]," - ").concat(o),value:h()("".concat(t<10?0:"").concat(t,"/01/").concat(o),"MM/DD/YYYY").format("MM/DD/YYYY")}),12===t&&(o+=1)}),e}}),methods:{syOnInput:function(){var t=this;t.schoolYearInfo=l.a.find(t.schoolYearList,["code",t.selectedSchoolYear]);var e=parseInt(h()().format("YYYY"));t.selectedMonthly=h()("".concat(h()().format("MM"),"/01/").concat(e),"MM/DD/YYYY").format("MM/DD/YYYY"),t.getMonthValues()},getMonthValues:function(){var t=this,e=h()(t.schoolYearInfo.schoolStartDate),o=h()(t.schoolYearInfo.schoolEndDate),n=[];while(e.isBefore(o))n.push(parseInt(e.format("MM"))),e=e.add(1,"month");t.monthValues=n},getSchoolYear:function(t){var e=this;try{y["a"].List().then(function(t){},function(t){e.$q.notify({position:"top",message:t.response.data.error,type:"negative",color:"negative"})})}catch(t){Object(Y["b"])(t)}},downloadDailyReport:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,m.DownloadDaily({branch:e.branch,fromDate:h()(e.dailyDate).format("MM/DD/YYYY"),toDate:h()(e.dailyDate).add(1,"days").format("MM/DD/YYYY")});case 4:o=t.sent,200===o.status&&(o.data.error||p()(o.data,"DailyReport-".concat(h()().format("YYYYMMDD"),".xlsx"))),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(Y["b"])(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),loadDailyPayments:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,m.Daily({fromDate:h()(e.dailyDate).format("MM/DD/YYYY"),toDate:h()(e.dailyDate).add(1,"days").format("MM/DD/YYYY")});case 4:o=t.sent,200!==o.status&&e.$q.notify({message:"Whoops! Something Went Wrong.",position:"top"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(Y["b"])(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),downloadMonthlyReport:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,m.DownloadMonthly({fromDate:h()(e.selectedMonthly,"MM/DD/YYYY").format("MM/DD/YYYY"),toDate:h()(e.selectedMonthly,"MM/DD/YYYY").endOf("month").format("MM/DD/YYYY")});case 4:o=t.sent,200===o.status&&(o.data.error||p()(o.data,"MonthlyReport-".concat(h()().format("YYYYMMDD"),".xlsx"))),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(Y["b"])(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),loadMonthlyPayments:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,m.Monthly({fromDate:h()(e.selectedMonthly,"MM/DD/YYYY").format("MM/DD/YYYY"),toDate:h()(e.selectedMonthly,"MM/DD/YYYY").endOf("month").format("MM/DD/YYYY")});case 4:o=t.sent,200!==o.status&&e.$q.notify({message:"Whoops! Something Went Wrong.",position:"top"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(Y["b"])(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),getSelectedSchoolBranch:function(t){var e=this,o=l.a.find(e.branches,["code",t.value]);o&&(e.branch=o.code)},deleteSchoolBranch:function(){var t=this;t.branch=""},mapSchoolBranch:function(t){return l.a.map(t,function(t){return{label:"".concat(t.code," - ").concat(t.name),value:t.code}})},getSchoolBranch:function(t,e){var o=this,n=[],a={terms:t};b["a"].PickList(a).then(function(t){if(200===t.status)if(t.data.error)o.$q.notify({color:"negative",message:t.data.error,position:"top"}),void 0!==e&&e(n);else{var a=JSON.parse(JSON.stringify(t.data));n=o.mapSchoolBranch(a),void 0!==e&&(o.branches=a,e(n))}},function(t){o.$q.notify({message:t.response.data.error,position:"top",type:"negative"})})},isUserHasAccess:function(t){var e=this,o=l.a.find(e.user.permissions,function(e,o){return e===t.name});return!!o},onGridReady:function(t){t.api.sizeColumnsToFit()},showItem:function(t){var e=this;"documentObject.label"===t.colDef.field?e.$router.push(t.data.documentObject.url):e.$router.push(t.data.workflow.url)}}},v=D,w=(o("cb2d"),o("2877")),M=Object(w["a"])(v,n,a,!1,null,null,null);M.options.__file="Dashboard.vue";e["default"]=M.exports},fd04:function(t,e,o){}}]);