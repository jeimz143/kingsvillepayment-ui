(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["514b3f6e"],{"2d0b":function(t,e,a){"use strict";var i=a("c519"),s=a.n(i);s.a},"35ca":function(t,e,a){"use strict";var i=a("3f4a");e["a"]={Update:function(t){return Object(i["a"])().patch("users/"+t._id,t)},UploadUserProfile:function(t){return Object(i["a"])().patch("/users/upload/"+t.userId,t)}}},c2ce:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"account-holder"},[a("div",{staticClass:"row gutter-sm"},[a("div",{staticClass:"col-sm-12 col-md-3"},[a("div",{staticClass:"row gutter-sm user-bar"},[a("div",{staticClass:"col-sm-4"},[a("img",{staticClass:"full-width",attrs:{src:t.user.avatar?t.apiURL+"avatar/"+t.user.avatar:"https://ui-avatars.com/api/?name="+t.user.name,alt:"",rounded:""},on:{click:function(e){t.showing=!0}}}),a("q-popover",{model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[a("q-list",{attrs:{link:""}},[a("q-item",{nativeOn:{click:function(e){t.showUploader()}}},[a("q-item-tile",[t._v("Upload Profile")])],1)],1)],1)],1),a("div",{staticClass:"col-sm-8"},[a("p",[t._v(t._s(t.user.name))]),a("p",[t._v("Edit Profile")])])]),a("q-list",t._l(t.pages,function(e,i){return a("div",{key:i},[null!=e.children?a("div",[a("q-collapsible",{attrs:{icon:e.icon,label:e.title}},[a("div",[a("q-list",{attrs:{separator:""}},t._l(e.children,function(e,i){return a("q-item",{key:i,attrs:{to:{name:e.link}}},[a("q-item-main",[a("q-item-tile",{attrs:{label:""}},[t._v(t._s(e.title))])],1)],1)}))],1)])],1):a("div",[a("q-item",{attrs:{link:"",to:{name:e.link}}},[a("q-item-side",{attrs:{icon:"shopping cart"}}),a("q-item-main",[a("q-item-tile",{attrs:{label:""}},[t._v(t._s(e.title))])],1)],1)],1)])}))],1),a("div",{staticClass:"col-sm-12 col-md-9"},[a("q-card",{staticClass:"page-content"},[a("q-card-title",[t._v("\n            "+t._s(t.pageDetails.title)+"\n            "),a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[t._v(t._s(t.pageDetails.subtitle))])]),a("q-card-separator"),a("q-card-main",[a("router-view")],1)],1)],1)])]),a("q-modal",{model:{value:t.profileModalToggle,callback:function(e){t.profileModalToggle=e},expression:"profileModalToggle"}},[a("div",{staticClass:"uploadProfileModal q-pa-md"},[a("q-btn",{staticClass:"float-right",attrs:{flat:"",round:"",color:"primary",icon:"fa fa-times"},on:{click:t.showUploader}}),a("h4",{staticClass:"q-ma-none"},[t._v("Upload your profile picture")]),a("q-uploader",{attrs:{url:t.apiURL+"users/upload/"+t.user._id,method:"PATCH",extensions:".gif,.jpg,.jpeg,.png","auto-expand":""},on:{uploaded:t.uploaded}})],1)])],1)},s=[];i._withStripped=!0;a("ac6a"),a("7514"),a("7f7f"),a("28a5"),a("96cf");var o=a("c973"),n=a.n(o),r=a("2ef0"),l=a.n(r),c=a("2f62"),u=a("35ca"),p={strict:!0,name:"Account",computed:l.a.merge(Object(c["b"])({user:"Auth/getUser",isUserSignedIn:"Auth/isUserSignedIn"}),{apiURL:function(){return this.$apiUrl}}),created:function(){var t=this;t.setPageDetails(),t.$store.dispatch("Bank/listAllBank")},updated:function(){var t=this;t.setPageDetails()},data:function(){return{profileModalToggle:!1,showing:!1,pageDetails:{},pages:[{page:"account",title:"Account",subtitle:"",link:"account",icon:"account circle",children:[{page:"profile",title:"Profile",subtitle:"Manage and protect your account",link:"account.profile",icon:"account circle"},{page:"bank-cards",title:"Banks & Cards",subtitle:"",link:"account.bank-cards"},{page:"addresses",title:"Addresses",subtitle:"",link:"account.addresses"},{page:"change-password",title:"Change Password",subtitle:"For your account's security, do not share your password with anyone else",link:"account.change-password"}]},{page:"purchase",title:"My Purchase",subtitle:"",link:"account.purchase"},{page:"my-notifications",title:"My Notifications",subtitle:"",link:"account.my-notifications"}]}},methods:{uploaded:function(t,e){var a=this,i=JSON.parse(e.response);try{var s={user:i.user,isUserSignedIn:!0};a.$store.dispatch("Auth/SetUser",s).then(function(t){a.$q.notify({message:"Profile Updated!",position:"top"})})}catch(t){a.$q.notify({message:"Whoops! Something went wrong. Please try saving again.",position:"top"})}},uploadFactory:function(){var t=n()(regeneratorRuntime.mark(function t(e){var a,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=this,t.prev=1,i={imageFile:e,userId:a.user._id},t.next=5,u["a"].UploadUserProfile(i);case 5:s=t.sent,console.log(s),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),a.$q.notify({position:"top",color:"positive",message:"Whoops! File upload fail."});case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}(),showUploader:function(){var t=this;t.profileModalToggle?t.profileModalToggle=!1:t.profileModalToggle=!0},setPageDetails:function(){var t=this,e=t.$route.name.split("."),a=l.a.filter(t.pages,["page",e[1]]);0!==a.length?t.pageDetails=l.a.find(t.pages,["page",e[1]]):l.a.forEach(t.pages,function(a,i){l.a.forEach(a.children,function(a,i){a.page===e[1]&&(t.pageDetails=a)})})}}},d=p,g=(a("2d0b"),a("2877")),f=Object(g["a"])(d,i,s,!1,null,"4b785ba7",null);f.options.__file="Account.vue";e["default"]=f.exports},c519:function(t,e,a){}}]);