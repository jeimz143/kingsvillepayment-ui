(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["68fe3ddc"],{1419:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row gutter-sm"},[i("div",{staticClass:"col-xs-12"},[i("div",{staticClass:"row gutter-sm float-right"},[i("div",[i("q-btn",{staticClass:"float-right",attrs:{flat:"",color:"positive",round:"",disabled:0===e.receipts.length},on:{click:function(t){e.onBtExport()}}},[i("q-icon",{attrs:{name:"file_download",size:"sm"}}),i("q-tooltip",[e._v("\n              Download CSV File\n            ")])],1)],1)])]),i("div",{staticClass:"col-xs-12"},[i("AgGrid",{staticClass:"ag-theme-material ag-list-page",attrs:{rowData:e.receiptsList,rowSelection:e.grid.rowSelection,rowAnimation:e.grid.rowAnimation,gridOptions:e.grid.gridOptions,defaultColDef:e.grid.defaultColDef,columnDefs:e.grid.tableColumns,overlayLoadingTemplate:e.grid.overlayLoadingTemplate,overlayNoRowsTemplate:e.grid.overlayNoRowsTemplate,pagination:!0,paginationPageSize:e.grid.paginationPageSize,context:e.grid.context,frameworkComponents:e.grid.frameworkComponents},on:{"grid-ready":e.onGridReady,"cell-clicked":e.showItem}})],1)])])},r=[];a._withStripped=!0;i("ac6a");var s=i("2f62"),o=i("2ef0"),n=i.n(o),l=i("c1df"),d=i.n(l),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row gutter-sm"},[i("div",["Used"!==e.params.data.status?i("q-btn",{staticClass:"float-right",attrs:{flat:"",color:"blue",round:""},on:{click:function(t){e.openOrCloseReasonModal()}}},[i("q-icon",{attrs:{name:"check_circle",size:"sm"}}),i("q-tooltip",[e._v("\n          Mark As Used\n        ")])],1):e._e()],1)]),i("q-modal",{model:{value:e.remarksModal,callback:function(t){e.remarksModal=t},expression:"remarksModal"}},[i("div",{staticClass:"q-pa-md"},[i("h6",{staticClass:"q-mt-xs"},[e._v("Mark Receipt as Used")]),i("q-field",{attrs:{label:"Reason for Marking a receipt as Used:",orientation:"vertical"}},[i("q-input",{attrs:{required:""},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),i("div",{staticClass:"row q-pt-md"},[i("div",{staticClass:"col-xs-6"},[i("q-btn",{attrs:{label:"Cancel"},on:{click:function(t){e.remarksModal=!1}}})],1),i("div",{staticClass:"col-xs-6"},[i("q-btn",{staticClass:"float-right",attrs:{color:"primary",label:"Save"},on:{click:e.markReceiptAsUsed}})],1)])],1)])],1)},u=[];c._withStripped=!0;i("96cf");var p=i("c973"),m=i.n(p),f=i("2b0e"),g=i("ed08"),h=i("cf63"),v=f["default"].extend({name:"EditCellButtonRenderer",mounted:function(){},created:function(){},data:function(){return{remarks:"",remarksModal:!1}},methods:{openOrCloseReasonModal:function(){var e=this;e.remarksModal=!e.remarksModal},markReceiptAsUsed:function(){var e=m()(regeneratorRuntime.mark(function e(){var t,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,e.prev=1,""===t.remarks){e.next=17;break}return i=JSON.parse(JSON.stringify(t.params.data)),i["remarks"]=t.remarks,i["status"]=1,e.next=8,h["a"].Update(i);case 8:if(a=e.sent,200===a.status){e.next=11;break}throw a;case 11:if(!a.data.error){e.next=13;break}throw a;case 13:t.$q.notify({message:"Receipt has been successfully updated!",position:"top",type:"positive"}),t.$store.dispatch("Receipt/setAll"),e.next=18;break;case 17:t.$q.notify({message:"Remarks is required!",position:"top"});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](1),Object(g["b"])(e.t0);case 23:case"end":return e.stop()}},e,this,[[1,20]])}));return function(){return e.apply(this,arguments)}}()}}),w=v,C=i("2877"),b=Object(C["a"])(w,c,u,!1,null,null,null);b.options.__file="IndexCellButtonRenderer.vue";var k=b.exports,x={name:"ReceiptList",sockets:{ReceiptList:function(e){var t=this,i=this;i.$store.dispatch("Receipt/listAll",e).then(function(){0===t.receipts.length?i.grid.gridApi.showNoRowsOverlay():i.grid.gridApi.hideOverlay(),t.autoSizeAll()})}},beforeMount:function(){var e=this;e.grid.gridOptions={onGridSizeChanged:function(){e.grid.gridOptions.api.sizeColumnsToFit()}},this.grid.context=this,this.grid.frameworkComponents={IndexCellButtonRenderer:k},this.grid.overlayLoadingTemplate='<span style="padding: 10px; border: 1px solid #eceff1; background: #fafafad6; width: 50%;">Loading... <q-icon name=""></span>',this.grid.overlayNoRowsTemplate='<span style="padding: 10px; border: 1px solid #eceff1; background: #fafafad6; width: 50%;">No rows to display <q-icon name=""></span>',this.grid.tableColumns=[{headerName:"OR Number",field:"orNumber",sortable:!0,filter:!0,width:150},{headerName:"Payment",field:"paymentFee.number",sortable:!0,filter:!0,width:150},{headerName:"Status",field:"status",sortable:!0,filter:!0,width:150},{headerName:"Actions",field:"_id",cellRenderer:"IndexCellButtonRenderer",pinned:"right"}]},mounted:function(){var e=this;e.grid.gridApi=e.grid.gridOptions.api,e.grid.gridColumnApi=e.grid.gridOptions.columnApi},data:function(){return{grid:{context:null,frameworkComponents:null,gridApi:null,gridColumnApi:null,gridOptions:{},rowData:[],overlayLoadingTemplate:null,overlayNoRowsTemplate:null,paginationPageSize:100,defaultColDef:{sortable:!0,resizable:!0,suppressSizeToFit:!0,cellClass:["pointer"]},rowAnimation:!0,rowSelection:"multiple",tableColumns:null}}},computed:n.a.merge(Object(s["b"])({user:"Auth/getUser",receipts:"Receipt/getAll"}),{receiptsList:function(){var e=this,t=[];return e.receipts.forEach(function(i,a){var r=i;r["status"]=e.parseStatus(r["status"]),t.push(r)}),t}}),methods:{parseStatus:function(e){return 1===e?"Used":2===e?"Cancelled":"Unused"},autoSizeAll:function(){var e=[];this.grid.gridColumnApi.getAllColumns().forEach(function(t){e.push(t.colId)}),this.grid.gridColumnApi.autoSizeColumns(e)},onBtExport:function(){var e=this,t="Receipt_List_"+d()().format("MM_DD_YYYY_hh_mm_ss"),i={skipHeader:!1,columnGroups:!1,allColumns:!0,fileName:t,columnSeparator:"",customHeader:"",customFooter:""};e.grid.gridApi.exportDataAsCsv(i)},onGridReady:function(e){e.api.sizeColumnsToFit(),this.$store.dispatch("Receipt/setAll")},showItem:function(e){}}},R=x,A=(i("e5eb"),Object(C["a"])(R,a,r,!1,null,null,null));A.options.__file="List.vue";t["default"]=A.exports},"53d1":function(e,t,i){},e5eb:function(e,t,i){"use strict";var a=i("53d1"),r=i.n(a);r.a}}]);